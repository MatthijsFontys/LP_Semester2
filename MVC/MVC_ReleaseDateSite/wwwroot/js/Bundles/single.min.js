function UpdateGui(n,t){n.classList.toggle("error-button");n.classList.toggle("correct-button");document.querySelector("#followCounter").innerText=t}function UpdateFollowState(n,t){$.post("/release/"+n.dataset.followstate+"/"+n.dataset.releaseid,i=>{let r=JSON.parse(i);n.dataset.followstate=r.followState;t(n,r.followCount,r.followState)})}function PostComment(){let n=document.querySelector("#CommentBox").value;document.querySelector("#CommentBox").value="";$.ajax({type:"POST",url:"/comment/postcomment/",data:{releaseId:releaseId,commentText:n},success:AppendComment})}function PostReply(n){let t=n.value;$.ajax({type:"POST",url:"/comment/postcomment/",data:{releaseId:releaseId,commentText:t,replyId:replyId}}).done(function(){n.parentNode.parentNode.removeChild(n.parentNode)})}function AppendReply(n){document.querySelectorAll("#ReplyCommentBox").forEach(function(n){n.parentNode.removeChild(n)});replyId=n.dataset.commentid;let t=document.querySelector("#CommentField").cloneNode(!0),r=t.querySelector("#BtnSubmit");r.removeAttribute("id");t.id="ReplyCommentBox";let i=t.getElementsByTagName("textarea")[0];i.value="";i.removeAttribute("id");i.placeholder="Your reply";let u=document.getElementById("CommentList");u.insertBefore(t,n.nextSibling);r.addEventListener("click",()=>PostReply(i),!1)}function AppendComment(n){let t=document.createElement("div");t.classList.add("w-100");t.innerHTML=n;let i=document.getElementById("CommentList"),r=document.getElementById("CommentField");i.insertBefore(t,r.nextSibling)}let followBtn=document.querySelector("[data-releaseid]");followBtn.addEventListener("click",()=>UpdateFollowState(followBtn,UpdateGui));4;let releaseId=document.querySelector("[data-releaseid]").dataset.releaseid,replyId;document.querySelector("#BtnSubmit").addEventListener("click",()=>{PostComment()});document.querySelectorAll(".BtnReply").forEach(n=>n.addEventListener("click",()=>AppendReply(n.parentElement),!1));